<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Economics Calculator - P1 Course</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: #f8f9fa; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header h1 { color: #2c3e50; margin: 0; }
        .header p { color: #7f8c8d; margin: 5px 0; }
        .section { background: white; padding: 25px; margin: 20px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section h3 { margin: 0 0 20px 0; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; color: #2c3e50; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; }
        .form-group input:focus { border-color: #3498db; outline: none; box-shadow: 0 0 5px rgba(52, 152, 219, 0.3); }
        .result-box { background: #e8f8f5; border-left: 4px solid #27ae60; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .result-box h4 { margin: 0 0 10px 0; color: #27ae60; }
        .metric { display: flex; justify-content: space-between; margin: 10px 0; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 5px; }
        .metric-label { font-weight: 600; }
        .metric-value { font-weight: bold; color: #2c3e50; }
        .warning { background: #ffeaa7; border-left: 4px solid #fdcb6e; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .good { background: #d1f2eb; border-left: 4px solid #27ae60; }
        .bad { background: #fadbd8; border-left: 4px solid #e74c3c; }
        .insights { background: #eef3fc; padding: 20px; margin: 20px 0; border-radius: 10px; border-left: 4px solid #3498db; }
        .chart-container { margin: 20px 0; padding: 20px; background: white; border-radius: 10px; }
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .container { padding: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Unit Economics Calculator</h1>
            <p>The Indian Startup - P1 Course Tool</p>
            <p style="color: #3498db; font-weight: bold;">Calculate your Customer Acquisition Cost, Lifetime Value, and Profitability</p>
        </div>

        <div class="section">
            <h3>💰 Revenue Metrics</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Average Revenue Per User (ARPU) - Monthly (₹)</label>
                    <input type="number" id="arpu" placeholder="e.g., 999" value="999">
                </div>
                <div class="form-group">
                    <label>Average Customer Lifespan (Months)</label>
                    <input type="number" id="lifespan" placeholder="e.g., 24" value="24">
                </div>
                <div class="form-group">
                    <label>Gross Margin (%)</label>
                    <input type="number" id="grossMargin" placeholder="e.g., 80" value="80">
                </div>
                <div class="form-group">
                    <label>Monthly Churn Rate (%)</label>
                    <input type="number" id="churnRate" placeholder="e.g., 5" value="5" step="0.1">
                </div>
            </div>
        </div>

        <div class="section">
            <h3>📊 Customer Acquisition Costs</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Monthly Marketing Spend (₹)</label>
                    <input type="number" id="marketingSpend" placeholder="e.g., 100000" value="100000">
                </div>
                <div class="form-group">
                    <label>Monthly Sales Team Cost (₹)</label>
                    <input type="number" id="salesCost" placeholder="e.g., 200000" value="200000">
                </div>
                <div class="form-group">
                    <label>New Customers Acquired Per Month</label>
                    <input type="number" id="newCustomers" placeholder="e.g., 100" value="100">
                </div>
                <div class="form-group">
                    <label>Other Acquisition Costs (₹)</label>
                    <input type="number" id="otherCosts" placeholder="e.g., 50000" value="50000">
                </div>
            </div>
        </div>

        <div class="section">
            <h3>⚡ Advanced Metrics</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Time to Payback (Target Months)</label>
                    <input type="number" id="paybackTarget" placeholder="e.g., 12" value="12">
                </div>
                <div class="form-group">
                    <label>Monthly Active Users (MAU)</label>
                    <input type="number" id="mau" placeholder="e.g., 2000" value="2000">
                </div>
                <div class="form-group">
                    <label>Conversion Rate (Visitors to Customers %)</label>
                    <input type="number" id="conversionRate" placeholder="e.g., 2.5" value="2.5" step="0.1">
                </div>
                <div class="form-group">
                    <label>Monthly Website Visitors</label>
                    <input type="number" id="visitors" placeholder="e.g., 10000" value="10000">
                </div>
            </div>
        </div>

        <div class="result-box" id="results">
            <h4>📈 Your Unit Economics Dashboard</h4>
            <div id="metricsDisplay"></div>
        </div>

        <div class="insights" id="insights">
            <h4>🧠 AI-Powered Insights & Recommendations</h4>
            <div id="insightsContent"></div>
        </div>

        <div class="section">
            <h3>🎯 Scenario Planning</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Target CAC Improvement (%)</label>
                    <input type="number" id="cacImprovement" placeholder="e.g., 20" value="0">
                </div>
                <div class="form-group">
                    <label>Target LTV Improvement (%)</label>
                    <input type="number" id="ltvImprovement" placeholder="e.g., 30" value="0">
                </div>
            </div>
            <div id="scenarioResults"></div>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return '₹' + amount.toLocaleString('en-IN');
        }

        function formatPercent(value) {
            return value.toFixed(1) + '%';
        }

        function calculate() {
            // Get input values
            const arpu = parseFloat(document.getElementById('arpu').value) || 0;
            const lifespan = parseFloat(document.getElementById('lifespan').value) || 0;
            const grossMargin = parseFloat(document.getElementById('grossMargin').value) || 0;
            const churnRate = parseFloat(document.getElementById('churnRate').value) || 0;
            
            const marketingSpend = parseFloat(document.getElementById('marketingSpend').value) || 0;
            const salesCost = parseFloat(document.getElementById('salesCost').value) || 0;
            const newCustomers = parseFloat(document.getElementById('newCustomers').value) || 0;
            const otherCosts = parseFloat(document.getElementById('otherCosts').value) || 0;
            
            const paybackTarget = parseFloat(document.getElementById('paybackTarget').value) || 0;
            const mau = parseFloat(document.getElementById('mau').value) || 0;
            const conversionRate = parseFloat(document.getElementById('conversionRate').value) || 0;
            const visitors = parseFloat(document.getElementById('visitors').value) || 0;

            // Calculate core metrics
            const totalAcquisitionCost = marketingSpend + salesCost + otherCosts;
            const cac = newCustomers > 0 ? totalAcquisitionCost / newCustomers : 0;
            const ltv = arpu * lifespan * (grossMargin / 100);
            const ltvCacRatio = cac > 0 ? ltv / cac : 0;
            const paybackPeriod = arpu > 0 ? cac / (arpu * (grossMargin / 100)) : 0;
            
            // Advanced metrics
            const monthlyRecurringRevenue = arpu * newCustomers * (100 - churnRate) / 100;
            const customerPaybackValue = arpu * paybackTarget * (grossMargin / 100);
            const actualConversionRate = visitors > 0 ? (newCustomers / visitors) * 100 : 0;
            const arpu_mau_ratio = mau > 0 ? (arpu * newCustomers) / mau : 0;

            // Display results
            const metricsHtml = `
                <div class="metric">
                    <span class="metric-label">Customer Acquisition Cost (CAC)</span>
                    <span class="metric-value">${formatCurrency(Math.round(cac))}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Customer Lifetime Value (LTV)</span>
                    <span class="metric-value">${formatCurrency(Math.round(ltv))}</span>
                </div>
                <div class="metric ${ltvCacRatio >= 3 ? 'good' : ltvCacRatio >= 1 ? 'warning' : 'bad'}">
                    <span class="metric-label">LTV:CAC Ratio</span>
                    <span class="metric-value">${ltvCacRatio.toFixed(2)}:1</span>
                </div>
                <div class="metric ${paybackPeriod <= paybackTarget ? 'good' : 'warning'}">
                    <span class="metric-label">Payback Period</span>
                    <span class="metric-value">${paybackPeriod.toFixed(1)} months</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Monthly Recurring Revenue (MRR)</span>
                    <span class="metric-value">${formatCurrency(Math.round(monthlyRecurringRevenue))}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Actual Conversion Rate</span>
                    <span class="metric-value">${formatPercent(actualConversionRate)}</span>
                </div>
            `;

            document.getElementById('metricsDisplay').innerHTML = metricsHtml;

            // Generate insights
            let insights = [];
            
            if (ltvCacRatio < 1) {
                insights.push("🚨 <strong>Critical:</strong> You're losing money on each customer (LTV < CAC). Focus on reducing acquisition costs or increasing customer value immediately.");
            } else if (ltvCacRatio < 3) {
                insights.push("⚠️ <strong>Warning:</strong> Your LTV:CAC ratio is below 3:1. Consider optimizing your acquisition strategy or increasing customer lifetime value.");
            } else {
                insights.push("✅ <strong>Great:</strong> Your LTV:CAC ratio is healthy! You're building a profitable business model.");
            }

            if (paybackPeriod > paybackTarget) {
                insights.push(`⏰ <strong>Cash Flow Alert:</strong> Your payback period (${paybackPeriod.toFixed(1)} months) exceeds your target. Consider improving unit economics or securing more working capital.`);
            }

            if (churnRate > 10) {
                insights.push("📉 <strong>Retention Issue:</strong> Your churn rate is high. Focus on product stickiness and customer success to improve LTV.");
            }

            if (actualConversionRate < 1) {
                insights.push("🎯 <strong>Conversion Opportunity:</strong> Your conversion rate is low. Optimize your website, landing pages, and user onboarding flow.");
            }

            const targetCAC = grossMargin > 20 ? ltv / 4 : ltv / 3; // Target 4:1 or 3:1 ratio
            if (cac > targetCAC) {
                insights.push(`💡 <strong>Optimization Target:</strong> Reduce your CAC to ₹${Math.round(targetCAC)} to achieve optimal unit economics.`);
            }

            // India-specific insights
            if (arpu < 500) {
                insights.push("🇮🇳 <strong>India Market:</strong> Consider value-based pricing. Indian customers will pay for clear ROI - emphasize cost savings or revenue generation.");
            }

            if (arpu > 5000 && conversionRate < 1) {
                insights.push("🎯 <strong>Premium Pricing:</strong> High ARPU with low conversion suggests need for better sales process or more compelling value demonstration.");
            }

            document.getElementById('insightsContent').innerHTML = insights.join('<br><br>');

            // Scenario planning
            calculateScenarios();
        }

        function calculateScenarios() {
            const cacImprovement = parseFloat(document.getElementById('cacImprovement').value) || 0;
            const ltvImprovement = parseFloat(document.getElementById('ltvImprovement').value) || 0;
            
            const currentCAC = parseFloat(document.getElementById('marketingSpend').value || 0) + 
                              parseFloat(document.getElementById('salesCost').value || 0) + 
                              parseFloat(document.getElementById('otherCosts').value || 0);
            const currentCustomers = parseFloat(document.getElementById('newCustomers').value) || 0;
            const currentLTV = parseFloat(document.getElementById('arpu').value || 0) * 
                              parseFloat(document.getElementById('lifespan').value || 0) * 
                              (parseFloat(document.getElementById('grossMargin').value || 0) / 100);
            
            const currentCACPerCustomer = currentCustomers > 0 ? currentCAC / currentCustomers : 0;
            const improvedCAC = currentCACPerCustomer * (1 - cacImprovement / 100);
            const improvedLTV = currentLTV * (1 + ltvImprovement / 100);
            const improvedRatio = improvedCAC > 0 ? improvedLTV / improvedCAC : 0;
            
            const scenarioHtml = `
                <div class="result-box">
                    <h4>🎯 Improved Scenario</h4>
                    <div class="metric good">
                        <span class="metric-label">Improved CAC</span>
                        <span class="metric-value">${formatCurrency(Math.round(improvedCAC))}</span>
                    </div>
                    <div class="metric good">
                        <span class="metric-label">Improved LTV</span>
                        <span class="metric-value">${formatCurrency(Math.round(improvedLTV))}</span>
                    </div>
                    <div class="metric good">
                        <span class="metric-label">New LTV:CAC Ratio</span>
                        <span class="metric-value">${improvedRatio.toFixed(2)}:1</span>
                    </div>
                    <div class="metric good">
                        <span class="metric-label">Additional Profit Per Customer</span>
                        <span class="metric-value">${formatCurrency(Math.round(improvedLTV - improvedCAC - (currentLTV - currentCACPerCustomer)))}</span>
                    </div>
                </div>
            `;
            
            document.getElementById('scenarioResults').innerHTML = scenarioHtml;
        }

        // Auto-calculate on input change
        document.addEventListener('input', function(e) {
            if (e.target.type === 'number') {
                calculate();
                // Auto-save to localStorage
                localStorage.setItem('unit_economics_' + e.target.id, e.target.value);
            }
        });

        // Load saved data
        window.addEventListener('load', function() {
            document.querySelectorAll('input[type="number"]').forEach(function(input) {
                const savedValue = localStorage.getItem('unit_economics_' + input.id);
                if (savedValue) {
                    input.value = savedValue;
                }
            });
            calculate();
        });

        // Initial calculation
        calculate();
    </script>
</body>
</html>